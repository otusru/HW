## **–°–ë–û–†–ö–ê –Ø–î–†–ê LINUX 6.1.130**

### 1. –°—Ç–∞—Ç—å `root`

```bash
su -
```

### 2. –û–±–Ω–æ–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ø–∞–∫–µ—Ç–æ–≤

```bash
echo "deb http://deb.debian.org/debian bookworm main contrib non-free non-free-firmware" > /etc/apt/sources.list
apt update
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
apt install -y \
    build-essential \
    libncurses-dev \
    bison \
    flex \
    libssl-dev \
    bc \
    dwarves \
    pahole \
    libelf-dev \
    zlib1g-dev \
    git \
    make \
    gcc \
    dpkg-dev \
    fakeroot \
    rsync \
    kmod \
    cpio \
    python3 \
    curl
```

```bash
apt update
apt install -y \
    build-essential libncurses-dev bison flex libssl-dev bc \
    dwarves pahole libelf-dev zlib1g-dev git make gcc \
    dpkg-dev fakeroot rsync kmod cpio python3 curl
```


### 4. –û—á–∏—Å—Ç–∏—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –º–æ–¥—É–ª–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π

```bash
sudo modprobe -r bluetooth
sudo modprobe -r snd_hda_codec_hdmi
```

–ü—Ä–æ–≤–µ—Ä—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏:

```bash
lsmod
```

### 5. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —è–¥—Ä–∞

```bash
cd /usr/src

curl -O https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.1.130.tar.gz

tar -xvf linux-6.1.130.tar.gz

cd linux-6.1.130
```

### 6. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —è–¥—Ä–∞

```bash
cp -v /boot/config-$(uname -r) .config
```

### 7. –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–æ—Ç–∫–ª—é—á–∏—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –æ–ø—Ü–∏–∏)

```bash
./scripts/config --disable SECURITY_SELINUX \
                 --disable SECURITY_SMACK \
                 --disable SECURITY_TOMOYO \
                 --disable SECURITY_APPARMOR \
                 --disable SECURITY_YAMA \
                 --disable RANDOMIZE_BASE \
                 --disable CPU_MITIGATIONS \
                 --disable MITIGATION_SPECTRE_BHI \
                 --disable MITIGATION_RFDS \
                 --disable PAGE_TABLE_ISOLATION \
                 --disable ZSWAP \
                 --disable BPF \
                 --disable BPF_SYSCALL \
                 --disable BPF_JIT \
                 --disable BPF_EVENTS \
                 --disable BPFILTER
```

### 8. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

–ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
make defconfig            # –°–æ–∑–¥–∞–µ—Ç –±–∞–∑–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —è–¥—Ä–∞.
```

–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —è–¥—Ä–æ –¥–ª—è –∂–µ–ª–µ–∑–∞

```bash
make localmodconfig       # –°–æ–∑–¥–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º—ã (–º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è)
```

–ï—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å .config

```bash
make olddefconfig         # –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é .config, –∑–∞–¥–∞–≤–∞—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
```

### 9. –°–æ–±—Ä–∞—Ç—å .deb –ø–∞–∫–µ—Ç—ã —è–¥—Ä–∞

```bash
make -j$(nproc) deb-pkg 2> ../error.log
```

### 10. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

```bash
cat ../error.log
```

### 11. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤–æ–µ —è–¥—Ä–æ

```bash
cd ..
dpkg -i linux-image-6.1.130*.deb linux-headers-6.1.130*.deb
```

### üîÅ 11. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–∏—Å—Ç–µ–º—É

```bash
reboot
```

### ‚úÖ 12. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–æ–≤–æ–µ —è–¥—Ä–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏:

```bash
uname -r
```

–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:

```
6.1.130
```
